<!DOCTYPE html>
<html lang="en">

<head>
    <link href="../vendors/bootstrap-4/dist/css/bootstrap.css" rel="stylesheet">
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="../vendors/bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.css" rel="stylesheet">
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
    <link href="../vendors/DataTables/datatables.css" />
    <link href="../vendors/pnotify/dist/pnotify.css" rel="stylesheet">
    <link href="../vendors/pnotify/dist/pnotify.buttons.css" rel="stylesheet">
    <link href="../vendors/bootstrap-fileinput-master/css/fileinput.css" rel="stylesheet">
    <link href="../build/css/custom.css" rel="stylesheet">

    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <script src="../vendors/jquery/dist/popper.js"></script>
    <script src="../vendors/bootstrap-4/dist/js/bootstrap.min.js"></script>
    <script src="../vendors/moment/min/moment.min.js"></script>
    <script src="../vendors/datatables.net/js/jquery.dataTables.js"></script>
    <script src="../vendors/jquery/dist/jquery.validate.min.js"></script>
    <script src="../vendors/pnotify/dist/pnotify.js"></script>
    <script src="../vendors/pnotify/dist/pnotify.buttons.js"></script>
    <script src="../vendors/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="../web-js/notify.js"></script>
    <script src="../vendors/bootstrap-fileinput-master/js/fileinput.js"></script>
    <script src="../vendors/bootstrap-fileinput-master/themes/fa/theme.js"></script>
    <script src="../build/js/custom.js"></script>

    <script>
        var app = {
            name: "Order",
            http: {
                method: 'POST'
            },
            mtparam: {
                status: 'ORDER.STATUS'
            },
            action: {
                update: 'Update',
                insert: 'Insert',
            },
            link: {
                insert: '/order-add',
                update: '/order-upd',
                getList: '/order-get-list',
                getById: '/order-get-info',
                mtparam: '/admin-get-mt-param-group',
            },
            setting: {
                dateFormat: 'YYYY-MM-DD HH:mm'
            },
        }

        var image_ic_old = [];
        var image_card_old = [];
        var image_signature_old = [];

        var mtpStatus = getMTParam(app.mtparam.status).then(function (result) {
            mtpStatus = result.data;
            initDropdownList('#ddlSearch_Status,#ddlModal_Status', result.data);
        });

        function init() {
            initApp();
            initButton();
            initModal();
            initDataTable();
            initDataTableBehavior();
            initDateRangePicker();
            initDateTimePicker();
            initDropzone();
            initValidateInput();
            initSizeChange();
        }

        function initApp() {
            $('#app_title').text(app.name);
        }

        function initSizeChange() {
            height = $('#main_panel').height();
            window.parent.postMessage({ "height": height }, "*");
        }

        function initButton() {
            $("#btnMainSearch").click(function (event) {
                $("#dtSearch").DataTable().ajax.reload();
            });
            $("#btnMainReset").click(function (event) {
                resetAllSearchInput();
            });
            $("#btnMainAdd").click(function (event) {
                insertRecordMode();
            });
            $("#btnModalMainAction").click(function (event) {
                actionModifyData();
            });
            $("#btnModalDismiss").click(function (event) {
                $('#modalCUWindow').modal('hide')
            });
        }

        function initModal() {
            $('#modalLoad').modal({
                backdrop: 'static', keyboard: true, show: false
            });
            $('#modalCUWindow').modal({
                backdrop: 'static', keyboard: true, show: false
            });
            $('#modalCUWindow').on('hidden.bs.modal', function () {
                resetAllModalInput();
            });
            $('#modalCUWindow').on('show.bs.modal', function () {
                $('#modalTab li:first-child a').tab('show');
            });
        }

        function initDropdownList(target, data) {
            for (var row = 0; row < data.length; row++) {
                $(target).append(new Option(data[row].value, data[row].code));
            }
        }

        function getMTParam(group) {
            return new Promise((resolve, reject) => {
                fetch(app.link.mtparam, { method: app.http.method, body: group })
                    .then(function (res) {
                        if (res.ok) {
                            return res.json();
                        }
                    })
                    .then(function (result) {
                        return resolve(result);
                    })
                    .catch(function (err) {
                        return reject(err);
                    })
            });
        }

        function initDataTable() {
            $('#dtSearch').DataTable().destroy();
            $("#dtSearch").DataTable({
                paging: true,
                pageLength: 10,
                serverSide: true,
                searching: false,
                deferLoading: 0,
                ajax: {
                    url: app.link.getList,
                    type: app.http.method,
                    data: function (dataValue) {
                        dataValue.id = $("#txtSearch_OrderID").val();
                        dataValue.email = $("#txtSearch_Email").val();
                        dataValue.phone_no = $("#txtSearch_Phone").val();
                        dataValue.status = $("#ddlSearch_Status").val();
                        dataValue.order_date_from = $("#dtpSearch_OrderDate_From").val();
                        dataValue.order_date_to = $("#dtpSearch_OrderDate_To").val();
                    },
                    beforeSend: function (value) {
                        $('#modalLoad').modal('show');
                    },
                    complete: function () {
                        $('#modalLoad').modal('hide'); initSizeChange();
                    },
                },
                columns: [
                    { data: '_id' },
                    { data: 'email' },
                    { data: 'phone_no' },
                    { data: 'status' },
                    { data: 'order_date' },
                ],
                columnDefs: [
                    { width: "20%", "targets": 0 },
                    { width: "20%", "targets": 1 },
                    { width: "20%", "targets": 2 },
                    {
                        width: "20%", "targets": 3, render: function (data, type, row) {
                            for (var row = 0; row < mtpStatus.length; row++) {
                                if (mtpStatus[row].code == data) {
                                    return mtpStatus[row].value;
                                }
                            }
                            return data;
                        }
                    },
                    { width: "20%", "targets": 4 },
                ],
                order: [[0, 'desc']]
            });
        }

        function initDataTableBehavior() {
            $('#dtSearch tbody').on('dblclick', 'tr', function () {
                var data = $('#dtSearch').DataTable().row(this).data();
                if (typeof data !== "undefined") {
                    getDetailById(data["_id"]);
                }
            });
        }

        function initDateRangePicker() {
            $('#dtpSearch_OrderDate').daterangepicker({
                autoApply: true,
                timePicker: true,
                timePicker24Hour: true,
                locale: {
                    format: app.setting.dateFormat
                }
            });
            $('#dtpSearch_OrderDate').val('');
        }

        function initDateTimePicker() {
            $('#dtpModal_OrderDate').daterangepicker({
                singleDatePicker: true,
                autoApply: false,
                timePicker: true,
                timePicker24Hour: true,
                locale: {
                    format: app.setting.dateFormat
                }
            });
        }

        function initDropzone(data) {

            var ic_preview = [];
            var ic_previewConfig = [];

            var card_preview = [];
            var card_previewConfig = [];

            var signature_preview = [];
            var signature_previewConfig = [];

            try {
                if (typeof data != 'undefined') {
                    if (data.image_ic) {
                        let imgLst = (data.image_ic + '').split(",");
                        for (let i = 0; i < imgLst.length; i++) {
                            var configs = {};
                            configs['downloadUrl'] = imgLst[i];
                            image_ic_old.push(imgLst[i] + '');
                            ic_preview.push(imgLst[i] + '');
                            ic_previewConfig.push(configs);
                        }
                    }

                    if (data.image_card) {

                        console.log("image_card : " + true);
                        let imgLst = (data.image_card + '').split(",");
                        for (let i = 0; i < imgLst.length; i++) {
                            console.log("image_card : inside");
                            var configs = {};
                            configs['downloadUrl'] = imgLst[i];
                            image_card_old.push(imgLst[i] + '');
                            card_preview.push(imgLst[i] + '');
                            card_previewConfig.push(configs);
                        }
                    }

                    if (data.image_signature) {
                        let imgLst = (data.image_signature + '').split(",");
                        for (let i = 0; i < imgLst.length; i++) {
                            var configs = {};
                            configs['downloadUrl'] = imgLst[i];
                            image_signature_old.push(imgLst[i] + '');
                            signature_preview.push(imgLst[i] + '');
                            signature_previewConfig.push(configs);
                        }
                    }
                }
            } catch (ex) {
                console.log("error :: " + ex);
            }

            $('#fuModal_IcImage').fileinput('destroy');
            $("#fuModal_IcImage").fileinput({
                theme: "fa",
                initialPreview: ic_preview,
                initialPreviewAsData: true,
                initialPreviewConfig: ic_previewConfig,
                deleteUrl: "/product-img-delete",
                overwriteInitial: true,
                maxFileSize: 10000,
                browseClass: "btn btn-primary btn-block",
                showCaption: false,
                showRemove: false,
                showUpload: false,
                showDrag: true,
            })
                .on('filepredelete', function (event, key, jqXHR, data) {
                    //  image_ic_old.splice(image_ic_old.indexOf(key), 1);
                    image_ic_old = [];
                })
                .on('change', function (event, key, jqXHR, data) {
                    image_ic_old = [];
                    //console.log("change");
                });


            $('#fuModal_CardImage').fileinput('destroy');
            $("#fuModal_CardImage").fileinput({
                theme: "fa",
                initialPreview: card_preview,
                initialPreviewAsData: true,
                initialPreviewConfig: card_previewConfig,
                deleteUrl: "/product-img-delete",
                overwriteInitial: true,
                maxFileSize: 10000,
                browseClass: "btn btn-primary btn-block",
                showCaption: false,
                showRemove: false,
                showUpload: false,
                showDrag: true,
            })
                .on('filepredelete', function (event, key, jqXHR, data) {
                    image_card_old = [];
                    //image_card_old.splice(image_card_old.indexOf(key), 1);
                })
                .on('change', function (event, key, jqXHR, data) {
                    image_card_old = [];
                    //console.log("change");
                });;

            $('#fuModal_SignatureImage').fileinput('destroy');
            $("#fuModal_SignatureImage").fileinput({
                theme: "fa",
                initialPreview: signature_preview,
                initialPreviewAsData: true,
                initialPreviewConfig: signature_previewConfig,
                deleteUrl: "/product-img-delete",
                overwriteInitial: true,
                maxFileSize: 10000,
                browseClass: "btn btn-primary btn-block",
                showCaption: false,
                showRemove: false,
                showUpload: false,
                showDrag: true,
            })
                .on('filepredelete', function (event, key, jqXHR, data) {
                    //image_signature_old.splice(image_signature_old.indexOf(key), 1);
                    image_signature_old = [];
                })
                .on('change', function (event, key, jqXHR, data) {
                    image_signature_old = [];
                    //console.log("change");
                });;

        }

        function initValidateInput() {
            $("#modalForm").validate({
                rules: {
                    dtpModal_OrderDate: {
                        required: true
                    },
                    ddlModal_Status: {
                        required: {
                            depends: function (element) {
                                return $("#ddlModal_Status").val() === "";
                            }
                        }
                    },
                    txtModal_Email: {
                        required: true
                    },
                },
                messages: {
                    dtpModal_OrderDate: {
                        required: "Please select order date."
                    },
                    ddlModal_Status: {
                        required: "Please select status."
                    },
                    txtModal_Email: {
                        required: "Please enter email."
                    },

                }
            });
        }

        function insertRecordMode() {
            var mode = app.action.insert;
            $('#modalTitle').text(mode + ' ' + app.name);
            $('#btnModalMainActionText').text(mode);
            document.getElementById("txtModal_OrderID_label").style.display = 'none';
            document.getElementById("txtModal_OrderID").style.display = 'none';
            disableElement(false);
            $('#modalCUWindow').modal('show')
        }

        function updateRecordMode() {
            var mode = app.action.update;
            $('#modalTitle').text(mode + ' ' + app.name);
            $('#btnModalMainActionText').text(mode);
            document.getElementById("txtModal_OrderID_label").style.display = 'block';
            document.getElementById("txtModal_OrderID").style.display = 'block';
            disableElement(true);
            $('#modalCUWindow').modal('show')
        }

        function disableElement(disable) {
            $("#txtModal_OrderID").prop("disabled", true);
            $("#btnModalDownload_Ic").prop("disabled", !disable);
            $("#btnModalDownload_Card").prop("disabled", !disable);
            $("#btnModalDownload_Signature").prop("disabled", !disable);
        }

        function resetAllSearchInput() {
            $("form#searchForm :input").each(function () {
                $(this).val('')
            });
        }

        function resetAllModalInput() {
            $("form#modalForm :input").each(function () {
                $(this).val('')
            });
            $('.dropzone').each(function (i, obj) {
                var tempDz = Dropzone.forElement("#" + obj.id);
                tempDz.removeAllFiles();
            });
            $('#modalForm').validate().resetForm();
        }

        function getModalFormData() {
            var formData = new FormData();

            formData.append('id', $("#formId").val());
            formData.append('order_date', moment($("#dtpModal_OrderDate").val()).unix());
            formData.append('status', $("#ddlModal_Status").val());

            // Detail
            formData.append('email', $("#txtModal_Email").val());
            formData.append('phone_no', $("#txtModal_Phone").val());
            formData.append('emergency_no', $("#txtModal_EmergencyPhone").val());


            // Document
            var icImage_files = document.getElementById('fuModal_IcImage').files[0];
            console.log("icImage_files : " + icImage_files);
            if (typeof icImage_files != 'undefined') {
                formData.append('image_ic', icImage_files);
            }

            var cardImage_files = document.getElementById('fuModal_CardImage').files[0];
            console.log("cardImage_files : " + cardImage_files);
            if (typeof cardImage_files != 'undefined') {
                formData.append('image_card', cardImage_files);
            }

            var signatureImage_files = document.getElementById('fuModal_SignatureImage').files[0];
            if (typeof signatureImage_files != 'undefined') {
                formData.append('image_signature', signatureImage_files);
            }

            formData.append('image_ic_old', image_ic_old);
            formData.append('image_card_old', image_card_old);
            formData.append('image_signature_old', image_signature_old);

            // Product Item

            // Address
            formData.append('first_line', $("#txtModal_AddressFirstLine").val());
            formData.append('second_line', $("#txtModal_AddressSecondLine").val());
            formData.append('third_line', $("#txtModal_AddressThirdLine").val());
            formData.append('city', $("#txtModal_AddressCity").val());
            formData.append('postcode', $("#txtModal_AddressPostcode").val());
            formData.append('state', $("#txtModal_AddressState").val());
            formData.append('country', $("#txtModal_AddressCountry").val());

            // Remarks
            formData.append('remarks', $("#taModal_Remarks").val());

            return formData;
        }

        function getOrderDate() {

            var orderDate = $("#dtpSearch_OrderDate").val().split("-");
            console.log(orderDate);

        }

        function successHandler(mode) {
            notify_success(mode + ' successfully.');
            $('#btnMainSearch').click();
            $('#modalCUWindow').modal('hide');
        }

        function editHandler(result) {
            var data = result.data;

            if (data) {
                $("#formId").val(data._id);
                $("#txtModal_OrderID").val(data._id);

                $('#dtpModal_OrderDate').data('daterangepicker').setStartDate(moment(data.order_date * 1000).format('YYYY-MM-DD HH:mm'))
                $('#dtpModal_OrderDate').data('daterangepicker').setEndDate(moment(data.order_date * 1000).format('YYYY-MM-DD HH:mm'))

                $("#ddlModal_Status").val(data.status);

                // Detail
                $("#txtModal_Email").val(data.email);
                $("#txtModal_Phone").val(data.phone_no);
                $("#txtModal_EmergencyPhone").val(data.emergency_no);

                // Document
                initDropzone(data);

                // Address
                let address = data.address;
                $("#txtModal_AddressFirstLine").val(address.first_line);
                $("#txtModal_AddressSecondLine").val(address.second_line);
                $("#txtModal_AddressThirdLine").val(address.third_line);
                $("#txtModal_AddressCity").val(address.city);
                $("#txtModal_AddressPostcode").val(address.postcode);
                $("#txtModal_AddressState").val(address.state);
                $("#txtModal_AddressCountry").val(address.country);

                // Remarks
                $("#taModal_Remarks").val(data.remarks);

                updateRecordMode();
            }
        }

        function errorMessageHandler(result) {
            if (result.error && result.error.length > 0) {
                notify_err(errors[0].message);
            } else {
                notify_server_err();
            }
        }

        function getDetailById(id) {
            $('#modalLoad').modal('show');
            var formData = new FormData();
            formData.append('id', id);

            fetch(app.link.getById, { method: app.http.method, body: formData })
                .then(function (res) {
                    if (res.ok) {
                        return res.json();
                    }
                    notify_req_failed();
                })
                .then(function (result) {
                    if (result.status_code == '100') {
                        editHandler(result);
                        loadProductList(result.data.order_product);
                    } else {
                        errorMessageHandler(result);
                    }
                })
                .catch(function (err) {
                    notify_server_err();
                })
                .finally(function () {
                    $('#modalLoad').modal('hide');
                });
        }

        function actionModifyData() {
            if ($("#modalForm").valid()) {
                $('#modalLoad').modal('show');

                var mode = $('#btnModalMainActionText').text();
                var path = (mode === app.action.update ? app.link.update : app.link.insert);

                fetch(path, { method: app.http.method, body: getModalFormData() })
                    .then(function (res) {
                        if (res.ok) {
                            return res.json();
                        }
                        notify_req_failed();
                    })
                    .then(function (result) {
                        if (result.status_code == '100') {
                            successHandler(mode);
                        } else {
                            errorMessageHandler(result);
                        }
                    })
                    .catch(function (err) {
                        notify_server_err();
                    })
                    .finally(function () {
                        $('#modalLoad').modal('hide');
                    });
            }
        }

        function addQuantity(elementIndex) {
            var result = document.getElementById('qty' + elementIndex);
            var qty = result.value;
            if (!isNaN(qty)) {
                result.value++;

                // var cart_list = JSON.parse(sessionStorage.cart);
                // cart_list[elementIndex].quantity = result.value;
                // sessionStorage.cart = JSON.stringify(cart_list);

                //$("#item-total"+elementIndex).html("RM " + (cart_list[elementIndex].price * cart_list[elementIndex].quantity))
            }
            //refreshCartNumber();
        }

        function reduceQuantity(elementIndex) {
            var result = document.getElementById('qty' + elementIndex);
            var qty = result.value;
            if (!isNaN(qty) && qty > 1) {
                result.value--;

                // var cart_list = JSON.parse(sessionStorage.cart);
                // cart_list[elementIndex].quantity = result.value;
                // sessionStorage.cart = JSON.stringify(cart_list);

                //$("#item-total"+elementIndex).html("RM " + (cart_list[elementIndex].price * cart_list[elementIndex].quantity))
            }
            //refreshCartNumber();
        }

        function deleteItem(elementIndex) {
            // var cart_list = JSON.parse(sessionStorage.cart);
            // cart_list.splice(elementIndex,1);
            // sessionStorage.cart = JSON.stringify(cart_list);

            $('#cartItemRow' + elementIndex).remove();
            // if (cart_list.length === 0){
            //     $("tbody").prepend(emptyRowContent);
            //     $('#checkout').click(function(e) {
            //         e.preventDefault();
            //     });
            //     $('#checkout').addClass('button-disable');
            // }

            // $("#pageloader").fadeIn();
            // document.location.reload();
        }

        function loadProductList(productList) {

            try {

                console.log("productList        :: " + JSON.stringify(productList));
                // console.log("productList length :: " + JSON.stringify(productList.length));

                let index = 0;
                // if (productList.length == 1) {
                //     $('#txtTotalRecord').text( $('#txtPageTitle').text() + ' x ' +  productList.length);
                // } else if (productList.length > 1) {
                //     $('#txtTotalRecord').text(productList.length);
                // }

                let productListHtml = "";

                productListHtml = productListHtml + '<div class="table-responsive">' +
                    '<table class="table">' +
                    '<thead>' +
                    '<tr>' +
                    '<th scope="col" class="string_product">Product</th>' +
                    '<th scope="col" class="string_payment">Payment</th>' +
                    // '<th scope="col" class="string_payment_type"></th>' +
                    '<th scope="col" class="string_quantity">Quantity</th>' +
                    '<th scope="col"></th>' +
                    '</tr>' +
                    '</thead>' +
                    '<tbody>';

                productList.forEach(product => {
                    index = index + 1;

                    productListHtml = productListHtml +
                        '<tr id="cartItemRow' + index + '">' +
                        '<td>' +
                        '<h5 class="card-product__title">' + product.product_name + '</h5>' +
                        '</td>' +

                        '<td>' +
                        '<h5 class="card-product__price">RM ' + product.price + ' </h5>' +
                        '</td>' +

                        // '<td>' +
                        // '<h5' +getStringById('string_payment_method')[product.payment_type] + ' </h5>' +
                        // '</td>' +

                        '<td>' +
                        '<div class="product_count">' +
                        '<input class="input-text qty" style="height: 40px" id="qty' + index + '" maxlength="3" name="qty" title="Quantity:" type="text" value="' + product.quantity + '">' +
                        '<button class="increase items-count" onclick=\'addQuantity(' + index + ', ' + product.price + ')\' id="btnIncProductQty" type="button">' +
                        '<i class="fa fa-chevron-up"></i>' +
                        '</button>' +
                        '<button class="reduced items-count" onclick=\'reduceQuantity(' + index + ', ' + product.price + ')\' id="btnDecProductQty" type="button">' +
                        '<i class="fa fa-chevron-down"></i>' +
                        '</button>' +
                        '</div>' +
                        '</td>' +

                        '<td>' +
                        '<a onclick=\'deleteItem(' + index + ')\'><i class="fa fa-trash"></i></a>' +
                        '</td>' +

                        '</tr>';
                });

                productListHtml = productListHtml +
                    '</tbody>' +
                    '</table>' +
                    '</div>' +
                    '<tr>' +
                    '<div class="modal-footer">' +
                    '<button type="button" class="btn btn-primary btn-sm" id="btnModalAddProductAction">Add Product</button>' +
                    '</div>' +
                    '</tr>';

                //console.log(productListHtml);

                $('#productList').append(productListHtml);
            } catch (ex) {
                console.log("loadProductList error :: " + ex);
            }
        }

        $(document).ready(function () {
            init();
        });
    </script>
</head>

<body>
    <div id="main_panel" class="x_panel">
        <div class="x_content mb-2">
            <!-- ACCORDION START -->
            <div class="accordion" id="accordion">
                <div class="panel border">
                    <a class="panel-heading" role="tab" id="headerPanel" data-toggle="collapse" data-parent="#accordion" href="#collapsePanel"
                        aria-expanded="false" aria-controls="collapsePanel">
                        <h4 id="app_title" class="panel-title">
                            <span class="glyphicon glyphicon-chevron-down" aria-hidden="false"></span>
                        </h4>
                    </a>
                    <div id="collapsePanel" class="panel-collapse show m-3" role="">
                        <div class="panel-body">
                            <form id="searchForm">
                                <input type="hidden" id="dtpSearch_OrderDate_From">
                                <input type="hidden" id="dtpSearch_OrderDate_To">
                                <div class="form-group row">
                                    <label for="txtSearch_OrderID" class="col-sm-2 col-form-label col-form-label-sm">Order ID</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtSearch_OrderID" name="txtSearch_OrderID" placeholder="Order ID">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtSearch_Email" class="col-sm-2 col-form-label col-form-label-sm">Email</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtSearch_Email" name="txtSearch_Email" placeholder="Email">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtSearch_Phone" class="col-sm-2 col-form-label col-form-label-sm">Phone number
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtSearch_Phone" name="txtSearch_Phone" placeholder="Phone number">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="ddlSearch_Status" class="col-sm-2 col-form-label col-form-label-sm">Status</label>
                                    <div class="col-sm-10">
                                        <select id="ddlSearch_Status" class="form-control form-control-sm" name="normal">
                                            <option value="">Please select</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="dtpSearch_OrderDate" class="col-sm-2 col-form-label col-form-label-sm">Order date</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm " name="dtpSearch_OrderDate" id="dtpSearch_OrderDate" value="" placeholder="Please select"
                                        />
                                    </div>
                                </div>
                            </form>
                            <div class="text-right">
                                <button id="btnMainReset" class="btn btn-secondary btn-sm" id="btnMainReset">Reset</button>
                                <button id="btnMainSearch" class="btn btn-success btn-sm" id="btnMainSearch">Search</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ACCORDION END -->
        </div>

        <div class="mb-2">
            <button class="btn btn-success btn-sm" id="btnMainAdd">Add</button>
        </div>

        <!-- RESULT TABLE START -->
        <div>
            <table id="dtSearch" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Email</th>
                        <th>Phone no.</th>
                        <th>Status</th>
                        <th>Order date</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <!-- RESULT TABLE END -->

        <br />
        <br />
        <br />
        <br />
    </div>

    <!-- PROMPT MODAL START -->
    <!-- PROMPT MODAL START -->
    <!-- PROMPT MODAL START -->
    <!-- PROMPT MODAL START -->
    <div class="modal fade bd-example-modal-lg" id="modalCUWindow" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        <span id="modalTitle"></span>
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="modalForm">
                        <input type="hidden" id="formId">
                        <input type="hidden" id="AddressId">
                        <div class="form-group row">
                            <label id="txtModal_OrderID_label" for="txtModal_OrderID" class="col-sm-2 col-form-label col-form-label-sm">Order ID
                            </label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control form-control-sm" id="txtModal_OrderID" name="txtModal_OrderID" placeholder="Order ID">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="dtpModal_OrderDate" class="col-sm-2 col-form-label col-form-label-sm">Order date
                            </label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control form-control-sm" name="dtpModal_OrderDate" id="dtpModal_OrderDate" value="" placeholder="Please select"
                                />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="ddlModal_Status" class="col-sm-2 col-form-label col-form-label-sm">Status</label>
                            <div class="col-sm-10">
                                <select id="ddlModal_Status" class="form-control form-control-sm" name="ddlModal_Status">
                                    <option value="">Please select</option>
                                </select>
                            </div>
                        </div>
                        <ul class="nav nav-tabs" id="modalTab">
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#detail">Detail</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#document">Document</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#productItems">Product Items
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#address">Address</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#remarks">Remarks</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div id="detail" class="tab-pane fade mt-4">
                                <div class="form-group row">
                                    <label for="txtModal_Email" class="col-sm-2 col-form-label col-form-label-sm">Email</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_Email" name="txtModal_Email" placeholder="Email">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_Phone" class="col-sm-2 col-form-label col-form-label-sm">Phone number
                                    </label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_Phone" name="txtModal_Phone" placeholder="Phone number">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_EmergencyPhone" class="col-sm-2 col-form-label col-form-label-sm">Emergency number</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_EmergencyPhone" name="txtModal_EmergencyPhone" placeholder="Emergency number">
                                    </div>
                                </div>
                            </div>
                            <div id="document" class="tab-pane fade mt-4">
                                <div class="form-group row">
                                    <label for="fuModal_IcImage" class="col-sm-2 col-form-label col-form-label-sm">IC Image
                                    </label>
                                    <input class="col-sm-2 col-form-label col-form-label-sm" id="fuModal_IcImage" name="fuModal_IcImage[]" type="file" style="width:200px">
                                </div>
                                <div class="form-group row">
                                    <label for="fuModal_CardImage" class="col-sm-2 col-form-label col-form-label-sm">Card Image
                                    </label>
                                    <div class="file-loading">
                                        <input id="fuModal_CardImage" name="fuModal_CardImage[]" type="file">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="fuModal_SignatureImage" class="col-sm-2 col-form-label col-form-label-sm">Signature Image
                                    </label>
                                    <input id="fuModal_SignatureImage" name="fuModal_SignatureImage[]" type="file">
                                </div>

                            </div>
                            <div id="productItems" class="tab-pane fade mt-4">
                                <section class="cart_area">
                                    <div class="container">
                                        <div id="productList" class="cart_inner">
                                        </div>
                                    </div>
                                </section>
                            </div>
                            <div id="address" class="tab-pane fade mt-4">
                                <div class="form-group row">
                                    <label for="txtModal_AddressFirstLine" class="col-sm-2 col-form-label col-form-label-sm">Address first line</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressFirstLine" name="txtModal_AddressFirstLine" placeholder="First line">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_AddressSecondLine" class="col-sm-2 col-form-label col-form-label-sm">Address second line</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressSecondLine" name="txtModal_AddressSecondLine"
                                            placeholder="Second Line">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_AddressThirdLine" class="col-sm-2 col-form-label col-form-label-sm">Address third line</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressThirdLine" name="txtModal_AddressThirdLine" placeholder="Third line">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_AddressCity" class="col-sm-2 col-form-label col-form-label-sm">City</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressCity" name="txtModal_AddressCity" placeholder="City">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_AddressPostcode" class="col-sm-2 col-form-label col-form-label-sm">Postcode</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressPostcode" name="txtModal_AddressPostcode" placeholder="Postcode">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_AddressState" class="col-sm-2 col-form-label col-form-label-sm">State</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressState" name="txtModal_AddressState" placeholder="State">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="txtModal_AddressCountry" class="col-sm-2 col-form-label col-form-label-sm">Country</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control form-control-sm" id="txtModal_AddressCountry" name="txtModal_AddressCountry" placeholder="Country">
                                    </div>
                                </div>
                            </div>
                            <div id="remarks" class="tab-pane fade mt-4">
                                <div class="form-group row">
                                    <label for="taModal_Remarks" class="col-sm-2 col-form-label col-form-label-sm">Remarks (FOUO)
                                    </label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control form-control-sm" rows="5" id="taModal_Remarks" name="taModal_Remarks" placeholder="Remarks"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-sm" id="btnModalDismiss">Close</button>
                    <button type="button" class="btn btn-primary btn-sm" id="btnModalMainAction">
                        <span id="btnModalMainActionText"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- PROMPT MODAL END -->
    <!-- PROMPT MODAL END -->
    <!-- PROMPT MODAL END -->
    <!-- PROMPT MODAL END -->

    <!-- LOADING START -->
    <!-- LOADING START -->
    <!-- LOADING START -->
    <!-- LOADING START -->
    <div class="modal fade bd-example-modal-sm" id="modalLoad" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- LOADING END -->
    <!-- LOADING END -->
    <!-- LOADING END -->
    <!-- LOADING END -->
</body>

</html>